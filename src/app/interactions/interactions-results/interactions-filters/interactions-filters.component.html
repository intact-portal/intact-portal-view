<div id="filters-bar" class="button-bar">

  <div class="button-group rounded stack-for-small">
    <div class="button no-hover">
      <i class="icon icon-functional icon-spacer icon-filter"></i> Filters
    </div>
    <button class="button lighter" type="button" data-toggle="interactor-species-dropdown">
      Interactor Species
    </button>
    <div class="dropdown-pane" id="interactor-species-dropdown" data-dropdown data-hover="true" data-hover-pane="true"
         style="visibility: visible; display: block"
         *ngIf="filterTypes.SPECIES as filter">
      <ul class="vertical menu facets margin-bottom-medium">
        <div class="scrollbar filter" [ngStyle]="filterStyle('combined_species')">

          <table>
            <thead>
            <tr class="no-background">
              <th></th>
              <th></th>
              <th class="no-padding">Intra</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let species of filters.facets.combined_species">
              <td class="no-padding">
                <input name="species"
                       type="checkbox"
                       value="{{species.value}}"
                       [disabled]="filters.intraSpecies && species.valueCount.intra === 0"
                       (change)="onChangeInteractorSpeciesFilter($event)"
                       [checked]="filters.isFilteringValue(filter,species.value)"/>
                <label>
                  {{species.value}}
                </label>
              </td>

              <ng-template [ngIf]="!filters.intraSpecies">
                <td style="text-align: right" class="no-padding">
                  <span class="tag-cell species-cell emphasized"
                        [ngStyle]="{'background-color':species.visualProperty}"
                  >{{species.valueCount.all}}</span>
                </td>

                <td class="no-padding">
                  <span class="tag-cell species-cell discreet"
                        [ngStyle]="{'border-color':species.visualProperty, 'color':species.visualProperty}"
                  >{{species.valueCount.intra}}</span>
                </td>

              </ng-template>


              <ng-template [ngIf]="filters.intraSpecies">
                <td style="text-align: right" class="no-padding">
                  <span class="tag-cell species-cell discreet"
                        [ngStyle]="{'border-color':species.visualProperty, 'color':species.visualProperty}"
                  >{{species.valueCount.all}}</span>
                </td>

                <td class="no-padding">
                  <span class="tag-cell species-cell emphasized"
                        [ngStyle]="{'background-color':species.visualProperty}"
                  >{{species.valueCount.intra}}</span>
                </td>
              </ng-template>
            </tr>
            </tbody>
          </table>
        </div>
      </ul>

      <mat-dialog-actions>
        <button class="centered delete-button" (click)="filters.resetFilter(filter)"
                *ngIf="filters.isFiltering(filter)" matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>

        Intra species only
        <mat-slide-toggle color="primary"
                          (change)="onChangeInteractionIntraSpeciesFilter($event)"
                          [disabled]="filters.canFilterIntraSpecies()"
                          [checked]="filters.intraSpecies"
                          class="float-right margin-top-medium margin-bottom-medium margin-left-medium"
                          style="align-content: center">
        </mat-slide-toggle>
      </mat-dialog-actions>
    </div>

    <button class="button lighter" type="button" data-toggle="interactor-type-dropdown">
      Interactor Type
    </button>
    <div class="dropdown-pane" id="interactor-type-dropdown" data-dropdown data-hover="true" data-hover-pane="true"
         *ngIf="filterTypes.INTERACTOR_TYPE as filter">
      <ul class="vertical menu facets">
        <div class=" scrollbar filter" [ngStyle]="filterStyle('type_MI_A_B_styled')">
          <li *ngFor="let molecule of filters.facets.type_MI_A_B_styled">
          <span class="facet"><input type="checkbox" value="{{molecule.value}}"
                                     (change)="onChangeInteractorTypeFilter($event)"
                                     [checked]="filters.isFilteringValue(filter, molecule.value)"/>
            <label>{{molecule.value}} ({{molecule.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>
      <div *ngIf="filters.isFiltering(filter)" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="filters.resetFilter(filter)"
                matTooltip="Remove filter"
                matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-type-dropdown">
      Interaction Type
    </button>
    <div class="dropdown-pane" id="interaction-type-dropdown" data-dropdown data-hover="true" data-hover-pane="true"
         *ngIf="filterTypes.INTERACTION_TYPE as filter">
      <ul class="vertical menu facets">
        <div class=" scrollbar filter" [ngStyle]="filterStyle('type_mi_identifier_styled')">
          <li *ngFor="let interactionType of filters.facets.type_mi_identifier_styled">
          <span class="facet"><input type="checkbox" value="{{interactionType.value}}"
                                     (change)="onChangeInteractionTypeFilter($event)"
                                     [checked]="filters.isFilteringValue(filter, interactionType.value)"/>
            <label>{{interactionType.value}} ({{interactionType.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>
      <div *ngIf="filters.isFiltering(filter)" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="filters.resetFilter(filter)"
                matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-detection-method-dropdown">
      Interaction Detection Method
    </button>
    <div class="dropdown-pane" id="interaction-detection-method-dropdown" data-dropdown data-hover="true"
         data-hover-pane="true" *ngIf="filterTypes.DETECTION_METHOD as filter">
      <ul class="vertical menu facets margin-bottom-medium">
        <div class="scrollbar filter" [ngStyle]="filterStyle('detection_method_s')">
          <li *ngFor="let detectionMethod of filters.facets.detection_method_s">
          <span class="facet"><input type="checkbox" value="{{detectionMethod.value}}"
                                     (change)="onChangeInteractionDetectionMethodFilter($event)"
                                     [checked]="filters.isFilteringValue(filter, detectionMethod.value)"/>
            <label>{{detectionMethod.value}} ({{detectionMethod.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>
      <div *ngIf="filters.isFiltering(filter)" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="filters.resetFilter(filter)"
                matTooltip="Remove filter"
                matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-host-organism-dropdown">
      Interaction Host Organism
    </button>
    <div class="dropdown-pane" id="interaction-host-organism-dropdown" data-dropdown data-hover="true"
         data-hover-pane="true" *ngIf="filterTypes.HOST_ORGANISM as filter">
      <ul class="vertical menu facets">
        <div class="scrollbar filter" [ngStyle]="filterStyle('host_organism_s')">
          <li *ngFor="let hostOrganism of filters.facets.host_organism_s">
            <span class="facet"> <input type="checkbox" value="{{hostOrganism.value}}"
                                        (change)="onChangeInteractionHostOrganismFilter($event)"
                                        [checked]="filters.isFilteringValue(filter, hostOrganism.value)"/>
              <label>{{hostOrganism.value}} ({{hostOrganism.valueCount}})</label>
            </span>
          </li>
        </div>
      </ul>
      <div *ngIf="filters.isFiltering(filter)" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="filters.resetFilter(filter)"
                matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-mutation-dropdown">
      Mutation
    </button>
    <div class="dropdown-pane" id="interaction-mutation-dropdown" data-dropdown data-hover="true"
         data-hover-pane="true" *ngIf="filterTypes.MUTATION as filter">
      <ul class="vertical menu facets">
        <div class="scrollbar filter" [ngStyle]="filterStyle('disrupted_by_mutation')">
          <mat-slide-toggle color="primary"
                            (change)="filters.updateFilter(filter, $event.checked)"
                            [disabled]="!filters.hasMutation"
                            [checked]="filters.mutation">
            Interactions affected by mutation only ({{filters.nbMutation}})
          </mat-slide-toggle>
        </div>
      </ul>
    </div>

    <button class="button lighter on-top" type="button" data-toggle="score-dropdown"
            [@bendTip]="filters.anyFiltersSelected() ? 'tipStraight' : 'tipBended'">
      MI Score
    </button>
    <div class="dropdown-pane" id="score-dropdown" data-dropdown data-hover="true" data-hover-pane="true"
         *ngIf="filterTypes.MI_SCORE as filter">
      <div style="width: 300px" class="custom-slider margin-bottom-large">
        <ng5-slider class="columns medium-3" [(value)]="filters.currentMinMIScore"
                    [(highValue)]="filters.currentMaxMIScore"
                    [options]="options"
                    (userChangeEnd)="onUserChangeEnd($event)"></ng5-slider>
      </div>
      <div *ngIf="filters.isFiltering(filter)" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="filters.resetFilter(filter)"
                matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>


    <button @slideIn *ngIf="filters.anyFiltersSelected()" class="button lighter" type="button"
            (click)="filters.resetAllFilters()"
            style="z-index: 0">
      <i class="icon icon-functional" data-icon="d"></i>
    </button>

  </div>

  <div class="button-group rounded stack-for-small">
    <div class="button no-hover">
      <i class="icon icon-functional icon-spacer icon-share"></i> Export
    </div>

    <button class="button lighter adjust-width" type="button" data-toggle="export-network" *ngIf="viewerService.viewer">
      Network
    </button>
    <div class="dropdown-pane no-padding no-border" id="export-network" data-dropdown data-hover="true"
         data-hover-pane="true">
      <ul class="no-bullet no-margin">
        <li><a class="button lightest expanded" (click)="viewerService.viewer.exportAs('png')">PNG</a></li>
        <li><a class="button lightest expanded no-margin" (click)="viewerService.viewer.exportAs('graphml')">GraphML</a>
        </li>
      </ul>
    </div>

    <button class="button lighter adjust-width" type="button" data-toggle="export-table">
      Table
    </button>
    <div class="dropdown-pane no-padding no-border" id="export-table" data-dropdown data-hover="true"
         data-hover-pane="true">
      <ul class="no-bullet no-margin">
        <li *ngFor="let format of formats; let last = last;">
          <ip-download-form [format]="format" [last]="last"></ip-download-form>
        </li>
      </ul>
    </div>
  </div>
</div>
