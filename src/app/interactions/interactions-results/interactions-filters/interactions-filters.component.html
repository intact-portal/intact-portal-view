<div id="filters-bar" class="button-bar">

  <div class="button-group rounded stack-for-small" id="filter-button-group">
    <div class="button no-hover">
      <i class="icon icon-functional icon-spacer icon-filter"></i> Filters
    </div>
    <button class="button lighter" type="button" data-toggle="interactor-species-dropdown">
      Interactor Species
    </button>
    <div class="dropdown-pane" id="interactor-species-dropdown" data-dropdown data-hover="true" data-hover-pane="true">
      <ul class="vertical menu facets margin-bottom-medium">
        <div class="scrollbar filter" [ngStyle]="filterStyle('speciesA_B_str')">
          <li *ngFor="let species of interactionFacets.speciesA_B_str">
          <span class="facet"><input #filter type="checkbox" value="{{species.value}}"
                                     (change)="onChangeInteractorSpeciesFilter(filter.value)"
                                     [checked]="isSelectedInteractorSpecies(species.value)"/>
            <label>{{species.value}} ({{species.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>

      <mat-dialog-actions>
        <button class="centered delete-button" (click)="resetFilter(filter.SPECIES)"
                *ngIf="interactorSpeciesFilter.length > 0" matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>

        <mat-slide-toggle #filterInterSpecies color="primary"
                          (change)="onChangeInteractionIntraSpeciesFilter(filterInterSpecies.checked)"
                          [disabled]="isSelectedMoreThanOneSpecies()"
                          [checked]="isSelectedInteractionIntraSpecies()"
                          class="float-right margin-top-medium margin-bottom-medium margin-left-medium"
                          style="align-content: center">
          Intra species only
        </mat-slide-toggle>
      </mat-dialog-actions>
    </div>

    <button class="button lighter" type="button" data-toggle="interactor-type-dropdown">
      Interactor Type
    </button>
    <div class="dropdown-pane" id="interactor-type-dropdown" data-dropdown data-hover="true" data-hover-pane="true">
      <ul class="vertical menu facets">
        <div class=" scrollbar filter" [ngStyle]="filterStyle('typeA_B_str')">
          <li *ngFor="let molecule of interactionFacets.typeA_B_str">
          <span class="facet"><input #filter type="checkbox" value="{{molecule.value}}"
                                     (change)="onChangeInteractorTypeFilter(filter.value)"
                                     [checked]="isSelectedInteractorType(molecule.value)"/>
            <label>{{molecule.value}} ({{molecule.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>
      <div *ngIf="interactorTypeFilter.length > 0" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="resetFilter(filter.INTERACTOR_TYPE)" matTooltip="Remove filter"
                matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-type-dropdown">
      Interaction Type
    </button>
    <div class="dropdown-pane" id="interaction-type-dropdown" data-dropdown data-hover="true" data-hover-pane="true">
      <ul class="vertical menu facets">
        <div class=" scrollbar filter" [ngStyle]="filterStyle('type_str')">
          <li *ngFor="let interactionType of interactionFacets.type_str">
          <span class="facet"><input #filter type="checkbox" value="{{interactionType.value}}"
                                     (change)="onChangeInteractionTypeFilter(filter.value)"
                                     [checked]="isSelectedInteractionType(interactionType.value)"/>
            <label>{{interactionType.value}} ({{interactionType.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>
      <div *ngIf="interactionTypeFilter.length > 0" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="resetFilter(filter.INTERACTION_TYPE)"
                matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-detection-method-dropdown">
      Interaction Detection Method
    </button>
    <div class="dropdown-pane" id="interaction-detection-method-dropdown" data-dropdown data-hover="true"
         data-hover-pane="true">
      <ul class="vertical menu facets margin-bottom-medium">
        <div class="scrollbar filter" [ngStyle]="filterStyle('detection_method_str')">
          <li *ngFor="let detectionMethod of interactionFacets.detection_method_str">
          <span class="facet"><input #filter type="checkbox" value="{{detectionMethod.value}}"
                                     (change)="onChangeInteractionDetectionMethodFilter(filter.value)"
                                     [checked]="isSelectedInteractionDetectionMethod(detectionMethod.value)"/>
            <label>{{detectionMethod.value}} ({{detectionMethod.valueCount}})</label>
          </span>
          </li>
        </div>
      </ul>
      <div *ngIf="interactionDetectionMethodFilter.length > 0" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="resetFilter(filter.DETECTION_METHOD)"
                matTooltip="Remove filter"
                matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter" type="button" data-toggle="interaction-host-organism-dropdown">
      Interaction Host Organism
    </button>
    <div class="dropdown-pane" id="interaction-host-organism-dropdown" data-dropdown data-hover="true"
         data-hover-pane="true">
      <ul class="vertical menu facets">
        <div class="scrollbar filter" [ngStyle]="filterStyle('host_organism_str')">
          <li *ngFor="let hostOrganism of interactionFacets.host_organism_str">
            <span class="facet"> <input #filter type="checkbox" value="{{hostOrganism.value}}"
                                        (change)="onChangeInteractionHostOrganismFilter(filter.value)"
                                        [checked]="isSelectedInteractionHostOrganism(hostOrganism.value)"/>
              <label>{{hostOrganism.value}} ({{hostOrganism.valueCount}})</label>
            </span>
          </li>
        </div>
      </ul>
      <div *ngIf="interactionHostOrganismFilter.length > 0" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="resetFilter(filter.HOST_ORGANISM)"
                matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>

    <button class="button lighter on-top" type="button" data-toggle="score-dropdown"
            [@bendTip]="anyFiltersSelected() ? 'tipStraight' : 'tipBended'">
      MI Score
    </button>
    <div class="dropdown-pane" id="score-dropdown" data-dropdown data-hover="true" data-hover-pane="true">
      <div style="width: 300px" class="custom-slider margin-bottom-large">
        <ng5-slider class="columns medium-3" [(value)]="minValueCurrent" [(highValue)]="maxValueCurrent"
                    [options]="options"
                    (userChangeEnd)="onUserChangeEnd($event)"></ng5-slider>
      </div>
      <div *ngIf="isFilteringScore()" class="margin-top-medium reset-button">
        <button class="delete-button" (click)="resetFilter(filter.MI_SCORE)"
                matTooltip="Remove filter" matTooltipPosition="below">
          <i class="icon icon-functional" data-icon="d"></i>
        </button>
      </div>
    </div>


    <button @slideIn *ngIf="anyFiltersSelected()" class="button lighter" type="button" (click)="resetAllFilters()"
            style="z-index: 0">
      <i class="icon icon-functional" data-icon="d"></i>
    </button>

  </div>

  <mat-progress-bar id="download-bar" *ngIf="download$ | async as download"
                    mode="buffer" [value]="download.progress"></mat-progress-bar>

  <div class="button-group rounded stack-for-small">
    <div class="button no-hover">
      <i class="icon icon-functional icon-spacer icon-share"></i> Export
    </div>

    <button class="button lighter adjust-width" type="button" data-toggle="export-network" *ngIf="viewerService.viewer">
      Network
    </button>
    <div class="dropdown-pane no-padding no-border" id="export-network" data-dropdown data-hover="true"
         data-hover-pane="true">
      <ul class="no-bullet no-margin">
        <li><a class="button lightest expanded" (click)="viewerService.viewer.exportAs('png')">PNG</a></li>
        <li><a class="button lightest expanded no-margin" (click)="viewerService.viewer.exportAs('graphml')">GraphML</a>
        </li>
      </ul>
    </div>

    <button class="button lighter adjust-width" type="button" data-toggle="export-table">
      Table
    </button>
    <div class="dropdown-pane no-padding no-border" id="export-table" data-dropdown data-hover="true"
         data-hover-pane="true">
      <ul class="no-bullet no-margin">
        <li *ngFor="let format of formats; let last= last;">
          <a class="button lightest expanded" [ngClass]="{'no-margin':last}"
             download="" (click)="export(format)" [innerHTML]="format.html"></a>
        </li>
      </ul>
    </div>
  </div>
</div>
